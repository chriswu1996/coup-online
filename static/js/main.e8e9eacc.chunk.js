(this["webpackJsonpcoup-client"]=this["webpackJsonpcoup-client"]||[]).push([[0],{104:function(e,t){},107:function(e,t,n){},108:function(e,t,n){},137:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(32),s=n.n(l),c=(n(74),n(75),n(1)),r=n(2),i=n(4),u=n(3),m=n(11),p=n(5),h=n(21),d=n.n(h),g=n(68),E=n(22),f=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).chooseAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={action:{action:e,target:t,source:n.props.name}};console.log(a),n.props.socket.emit("g-actionDecision",a),n.props.doneAction()},n.deductCoins=function(e){console.log(n.props.money,e),"assassinate"===e?n.props.money>=3?(n.props.deductCoins(3),n.pickingTarget("assassinate")):n.setState({actionError:"Not enough coins to assassinate!"}):"coup"===e&&(n.props.money>=7?(n.props.deductCoins(7),n.pickingTarget("coup")):n.setState({actionError:"Not enough coins to coup!"}))},n.pickingTarget=function(e){n.setState({isPickingTarget:!0,targetAction:e,actionError:""}),n.setState({targetAction:e})},n.pickTarget=function(e){n.chooseAction(n.state.targetAction,e)},n.state={isDecisionMade:!1,decision:"",isPickingTarget:!1,targetAction:"",actionError:""},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=null;return t=this.state.isPickingTarget?this.props.players.filter((function(e){return!e.isDead})).filter((function(t){return t.name!==e.props.name})).map((function(t,n){return o.a.createElement("button",{style:{backgroundColor:t.color},key:n,onClick:function(){return e.pickTarget(t.name)}},t.name)})):this.props.money<10?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){return e.chooseAction("income")}},"Income"),o.a.createElement("button",{onClick:function(){return e.deductCoins("coup")}},"Coup"),o.a.createElement("button",{onClick:function(){return e.chooseAction("foreign_aid")}},"Foreign Aid"),o.a.createElement("button",{id:"captain",onClick:function(){return e.pickingTarget("steal")}},"Steal"),o.a.createElement("button",{id:"assassin",onClick:function(){return e.deductCoins("assassinate")}},"Assassinate"),o.a.createElement("button",{id:"duke",onClick:function(){return e.chooseAction("tax")}},"Tax"),o.a.createElement("button",{id:"ambassador",onClick:function(){return e.chooseAction("exchange")}},"Exchange")):o.a.createElement("button",{onClick:function(){return e.deductCoins("coup")}},"Coup"),o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"DecisionTitle"},"Choose an action"),o.a.createElement("div",{className:"DecisionButtonsContainer"},t,o.a.createElement("p",null,this.state.actionError)))}}]),t}(a.Component),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).vote=function(e){n.props.closeOtherVotes("challenge");var t={action:n.props.action,isChallenging:e,challengee:n.props.action.source,challenger:n.props.name};console.log(t),n.props.socket.emit("g-challengeDecision",t),n.props.doneChallengeVote()},n.challengeText=function(e,t,n){return"steal"===e?o.a.createElement("p",null,o.a.createElement("b",null,t)," is trying to Steal from ",o.a.createElement("b",null,n)):"tax"===e?o.a.createElement("p",null,o.a.createElement("b",null,t)," is trying to collect Tax (3 coins)"):"assassinate"===e?o.a.createElement("p",null,o.a.createElement("b",null,t)," is trying to Assassinate ",o.a.createElement("b",null,n)):"exchange"===e?o.a.createElement("p",null,o.a.createElement("b",null,t)," is trying to Exchange their influences"):void 0},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,this.challengeText(this.props.action.action,this.props.action.source,this.props.action.target),o.a.createElement("button",{onClick:function(){return e.vote(!0)}},"Challenge"))}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).vote=function(e){n.props.closeOtherVotes("challenge-block");var t={counterAction:n.props.counterAction,prevAction:n.props.prevAction,isChallenging:e,challengee:n.props.counterAction.source,challenger:n.props.name};console.log(t),n.props.socket.emit("g-blockChallengeDecision",t),n.props.doneBlockChallengeVote()},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,this.props.counterAction.source," is trying to block ",this.props.prevAction.action," from ",this.props.prevAction.source," as ",this.props.counterAction.claim),o.a.createElement("button",{onClick:function(){return e.vote(!0)}},"Challenge"))}}]),t}(a.Component);n(107);function C(e){var t=null;return e.players.length>1&&(t=e.players.map((function(e,t){return o.a.createElement("span",{className:"PlayerBoardItem",style:{backgroundColor:"".concat(e.color)},key:t},o.a.createElement("h2",null,e.name),o.a.createElement("p",null,"Coins: ",e.money),o.a.createElement("p",null,"Influences: ",e.influences.length))}))),o.a.createElement("div",{className:"PlayerBoardContainer",style:{textAlign:"center"}},t)}var y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).selectInfluence=function(e){var t={revealedCard:e,prevAction:n.props.res.action,counterAction:n.props.res.counterAction,challengee:n.props.res.challengee,challenger:n.props.res.challenger,isBlock:n.props.res.isBlock};console.log(t),n.props.socket.emit("g-revealDecision",t),n.props.doneReveal()},n.act=n.props.res.isBlock?n.props.res.counterAction.counterAction:n.props.res.action.action,n.actionMap={tax:["duke"],assassinate:["assassin"],exchange:["ambassador"],steal:["captain"],block_foreign_aid:["duke"],block_steal:["ambassador","captain"],block_assassinate:["contessa"]},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.influences.map((function(t,n){return o.a.createElement("button",{id:t,key:n,onClick:function(){return e.selectInfluence(t)}},t)}));return o.a.createElement("div",null,o.a.createElement("p",null,"Your ",o.a.createElement("b",null,this.act)," has been challenged! If you don't reveal ",this.actionMap[this.act].join(" or ")," you'll lose influence! "),t)}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).chooseAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={action:{action:e,target:t,source:n.props.name}};console.log(a),n.props.socket.emit("g-actionDecision",a),n.props.doneAction()},n.block=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.props.closeOtherVotes("block"),null!=a?t=a:"block_foreign_aid"===e?t="duke":"block_assassinate"===e?t="contessa":console.error("unknown claim, line 40");var o={prevAction:n.props.action,counterAction:{counterAction:e,claim:t,source:n.props.name},blockee:n.props.action.source,blocker:n.props.name,isBlocking:!0};console.log(o),n.props.socket.emit("g-blockDecision",o),n.props.doneBlockVote()},n.pass=function(){var e={action:n.props.action,isBlocking:!1};console.log(e),n.props.socket.emit("g-blockDecision",e),n.props.doneBlockVote()},n.pickClaim=function(e){n.props.closeOtherVotes("block"),n.setState({decision:e}),n.setState({isPickingClaim:!0})},n.state={isDecisionMade:!1,decision:"",isPickingClaim:!1,targetAction:""},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=null,n=null;return this.state.isPickingClaim?n=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"To block steal, do you claim Ambassador or Captain?"),o.a.createElement("button",{onClick:function(){return e.block(e.state.decision,"ambassador")}},"Ambassador"),o.a.createElement("button",{onClick:function(){return e.block(e.state.decision,"captain")}},"Captain")):"foreign_aid"===this.props.action.action?t=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,o.a.createElement("b",null,this.props.action.source)," is trying to use Foreign Aid"),o.a.createElement("button",{onClick:function(){return e.block("block_foreign_aid")}},"Block Foreign Aid")):"steal"===this.props.action.action?t=o.a.createElement("button",{onClick:function(){return e.pickClaim("block_steal")}},"Block Steal"):"assassinate"===this.props.action.action&&(t=o.a.createElement("button",{onClick:function(){return e.block("block_assassinate")}},"Block Assassination")),o.a.createElement(o.a.Fragment,null,t,n)}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).selectInfluence=function(e){var t={influence:e,playerName:n.props.name};console.log(t),n.props.socket.emit("g-chooseInfluenceDecision",t),n.props.doneChooseInfluence()},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.influences.map((function(t,n){return o.a.createElement("button",{id:"".concat(t),key:n,onClick:function(){return e.selectInfluence(t)}},t)}));return o.a.createElement("div",null,o.a.createElement("p",{className:"DecisionTitle"},"Choose an influence to lose "),t)}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).selectInfluence=function(e){if(n.state.keep.push(n.state.influences.splice(e,1)[0]),n.setState({influences:n.state.influences,putBack:n.state.putBack}),n.state.keep.length===n.state.totalInf-2){var t={playerName:n.props.name,kept:n.state.keep,putBack:n.state.influences};n.props.socket.emit("g-chooseExchangeDecision",t),n.props.doneExchangeInfluence()}},n.state={influences:e.influences,keep:[],totalInf:e.influences.length},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.influences.map((function(t,n){return o.a.createElement("button",{key:n,onClick:function(){return e.selectInfluence(n)}},t)}));return o.a.createElement("div",null,o.a.createElement("p",{className:"DecisionTitle"},"Choose which influence(s) to keep"),t)}}]),t}(a.Component),A=(n(108),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"EventLogContainer"},o.a.createElement("p",{className:"bold EventLogTitle"},"Event Log"),o.a.createElement("div",{className:"EventLogBody"},this.props.logs.map((function(t,n){return n===e.props.logs.length-1?o.a.createElement("p",{className:"new"},t):o.a.createElement("p",null,t)})),o.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})))}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}}]),t}(a.Component)),N=n(17),j=n.n(N),x=n(64),I=n.n(x),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleOpenCheatSheetModal=function(){n.setState({showCheatSheetModal:!0})},n.handleCloseCheatSheetModal=function(){n.setState({showCheatSheetModal:!1})},n.state={showCheatSheetModal:!1},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"CheatSheet",onClick:this.handleOpenCheatSheetModal},o.a.createElement("p",null,"Cheat Sheet"),o.a.createElement("svg",{className:"InfoIcon",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 21 22"},o.a.createElement("g",{id:"more_info","data-name":"more info",transform:"translate(-39 -377)"},o.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",className:"cls-1",transform:"translate(39 377)"},o.a.createElement("circle",{className:"cls-3",cx:"10.5",cy:"10.5",r:"10.5"}),o.a.createElement("circle",{className:"cls-4",cx:"10.5",cy:"10.5",r:"10"})),o.a.createElement("text",{id:"i",className:"cls-2",transform:"translate(48 393)"},o.a.createElement("tspan",{x:"0",y:"0"},"i"))))),o.a.createElement(j.a,{isOpen:this.state.showCheatSheetModal,contentLabel:"Minimal Modal Example",onRequestClose:this.handleCloseCheatSheetModal,shouldCloseOnOverlayClick:!0,className:"CheatSheetModal"},o.a.createElement("div",{className:"CloseModalButtonContainer"},o.a.createElement("button",{className:"CloseModalButton",onClick:this.handleCloseCheatSheetModal},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 21 21"},o.a.createElement("g",{id:"more_info","data-name":"more info",transform:"translate(-39 -377)"},o.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",class:"cls-5",transform:"translate(39 377)"},o.a.createElement("circle",{class:"cls-7",cx:"10.5",cy:"10.5",r:"10.5"}),o.a.createElement("circle",{class:"cls-8",cx:"10.5",cy:"10.5",r:"10"})),o.a.createElement("text",{id:"x",class:"cls-6",transform:"translate(46 391)"},o.a.createElement("tspan",{x:"0",y:"0"},"x")))))),o.a.createElement("div",{className:"CheatSheetContainer"},o.a.createElement("img",{src:I.a,alt:"Cheat-Sheet"}))))}}]),t}(a.Component),R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleOpenRulesModal=function(){n.setState({showRulesModal:!0})},n.handleCloseRulesModal=function(){n.setState({showRulesModal:!1})},n.state={showRulesModal:!1},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=o.a.createElement(j.a,{isOpen:this.state.showRulesModal,contentLabel:"Minimal Modal Example",onRequestClose:this.handleCloseRulesModal,shouldCloseOnOverlayClick:!0},o.a.createElement("div",{className:"CloseModalButtonContainer"},o.a.createElement("button",{className:"CloseModalButton",onClick:this.handleCloseRulesModal},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 21 21"},o.a.createElement("g",{id:"more_info","data-name":"more info",transform:"translate(-39 -377)"},o.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",class:"cls-5",transform:"translate(39 377)"},o.a.createElement("circle",{class:"cls-7",cx:"10.5",cy:"10.5",r:"10.5"}),o.a.createElement("circle",{class:"cls-8",cx:"10.5",cy:"10.5",r:"10"})),o.a.createElement("text",{id:"x",class:"cls-6",transform:"translate(46 391)"},o.a.createElement("tspan",{x:"0",y:"0"},"x")))))),o.a.createElement("div",{className:"RulesContainer"},o.a.createElement("div",{className:"RulesContent"},o.a.createElement("h2",null,"Rules"),o.a.createElement("p",null,"2-6 players"),o.a.createElement("p",null,"On your turn, you may choose an action to play. The action you choose may or may not correspond to the influences that you possess. For the action that you choose, other players may potentially block or challenge it. "),o.a.createElement("p",null,o.a.createElement("b",null,"Challenge"),": When a player declares an action they are declaring to the rest of the players that they have a certain influence, and any other player can challenge it. When a player is challenged, the challenged player must reveal the correct influence associated with their action. If they reveal the correct influence, the challenger player will lose an influence. However, if they fail to reveal the correct influence the challenged player will lose their incorrectly revealed influence."),o.a.createElement("p",null,o.a.createElement("b",null,"Block"),': When the any of the actions "Foreign Aid", "Steal", and "Assasinate" are used, they can be blocked. Once again, any player can claim to have the correct influence to block. However, blocks can also be challenged by any player. If a block fails, the original action will take place.'),o.a.createElement("p",null,"If a player loses all their influences, they are out of the game. The last player standing wins!"),o.a.createElement("p",null,"At this time, if a player disconnects, the game must be recreated."),o.a.createElement("h2",null,"Influences"),o.a.createElement("h3",null,"Captain"),o.a.createElement("p",null,o.a.createElement("b",{id:"captain-color"},"STEAL"),": Steal 2 coins from a target. Blockable by ",o.a.createElement("hl",{id:"captain-color"},"Captain")," or ",o.a.createElement("hl",{id:"ambassador-color"},"Ambassador"),". Can block ",o.a.createElement("hl",{id:"captain-color"},"STEAL")),o.a.createElement("h3",null,"Assassin"),o.a.createElement("p",null,o.a.createElement("b",{id:"assassin-color"},"ASSASSINATE"),": Pay 3 coins to choose a target to assassinate (target loses an influence). Blockable by ",o.a.createElement("hl",{id:"contessa-color"},"Contessa"),"."),o.a.createElement("h3",null,"Duke"),o.a.createElement("p",null,o.a.createElement("b",{id:"duke-color"},"TAX"),": Collect 3 coins from the treasury. Not blockable. Can block Foreign Aid."),o.a.createElement("h3",null,"Ambassador"),o.a.createElement("p",null,o.a.createElement("b",{id:"ambassador-color"},"EXCHANGE"),": Draw 2 influences into your hand and pick any 2 influences to put back. Not blockable. Can block ",o.a.createElement("hl",{id:"captain-color"},"STEAL")),o.a.createElement("h3",null,"Contessa"),o.a.createElement("p",null,o.a.createElement("b",{id:"contessa-color"},"BLOCK ASSASSINATION"),": Can block ",o.a.createElement("b",{id:"assassin-color"},"assassinations"),". Not blockable."),o.a.createElement("h3",null,"Other Actions"),o.a.createElement("p",null,o.a.createElement("b",null,"INCOME"),": Collect 1 coins from the treasury."),o.a.createElement("p",null,o.a.createElement("b",null,"FOREIGN AID"),": Collect 2 coins from the treasury. Blockable by ",o.a.createElement("hl",{id:"duke-color"},"Duke"),"."),o.a.createElement("p",null,o.a.createElement("b",null,"COUP"),": Pay 7 coins and choose a target to lose an influence. If a player starts their turn with 10 or more coins, they must Coup. Not Blockable."))));return this.props.home?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"HomeRules",onClick:this.handleOpenRulesModal},o.a.createElement("p",null,"Rules "),o.a.createElement("svg",{className:"InfoIcon",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 21 22"},o.a.createElement("g",{id:"more_info","data-name":"more info",transform:"translate(-39 -377)"},o.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",className:"cls-1",transform:"translate(39 377)"},o.a.createElement("circle",{className:"cls-3",cx:"10.5",cy:"10.5",r:"10.5"}),o.a.createElement("circle",{className:"cls-4",cx:"10.5",cy:"10.5",r:"10"})),o.a.createElement("text",{id:"i",className:"cls-2",transform:"translate(48 393)"},o.a.createElement("tspan",{x:"0",y:"0"},"i"))))),e):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"Rules",onClick:this.handleOpenRulesModal},o.a.createElement("p",null,"Rules "),o.a.createElement("svg",{className:"InfoIcon",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 21 22"},o.a.createElement("g",{id:"more_info","data-name":"more info",transform:"translate(-39 -377)"},o.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",className:"cls-1",transform:"translate(39 377)"},o.a.createElement("circle",{className:"cls-3",cx:"10.5",cy:"10.5",r:"10.5"}),o.a.createElement("circle",{className:"cls-4",cx:"10.5",cy:"10.5",r:"10"})),o.a.createElement("text",{id:"i",className:"cls-2",transform:"translate(48 393)"},o.a.createElement("tspan",{x:"0",y:"0"},"i"))))),e)}}]),t}(a.Component),B=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).deductCoins=function(e){var t={source:n.props.name,amount:e};n.props.socket.emit("g-deductCoins",t)},n.doneAction=function(){n.setState({isChooseAction:!1})},n.doneChallengeBlockingVote=function(){n.setState({action:null}),n.setState({blockChallengeRes:null}),n.setState({blockingAction:null})},n.closeOtherVotes=function(e){"challenge"===e?(n.setState({blockChallengeRes:null}),n.setState({blockingAction:null})):"block"===e?(n.setState({action:null}),n.setState({blockChallengeRes:null})):"challenge-block"===e&&(n.setState({action:null}),n.setState({blockingAction:null}))},n.doneReveal=function(){n.setState({revealingRes:null})},n.doneChooseInfluence=function(){n.setState({isChoosingInfluence:!1})},n.doneExchangeInfluence=function(){n.setState({exchangeInfluence:null})},n.pass=function(){if(null!=n.state.action){var e={isChallenging:!1,action:n.state.action};console.log(e),n.props.socket.emit("g-challengeDecision",e)}else if(null!=n.state.blockChallengeRes){var t={isChallenging:!1};console.log(t),n.props.socket.emit("g-blockChallengeDecision",t)}else if(null!==n.state.blockingAction){var a={action:n.state.blockingAction,isBlocking:!1};console.log(a),n.props.socket.emit("g-blockDecision",a)}n.doneChallengeBlockingVote()},n.influenceColorMap={duke:"#D55DC7",captain:"#80C6E5",assassin:"#2B2B2B",contessa:"#E35646",ambassador:"#B4CA1F"},n.state={action:null,blockChallengeRes:null,players:[],playerIndex:null,currentPlayer:"",isChooseAction:!1,revealingRes:null,blockingAction:null,isChoosingInfluence:!1,exchangeInfluence:null,error:"",winner:"",playAgain:null,logs:[],isDead:!1,waiting:!0,disconnected:!1};var a=Object(m.a)(n);return n.playAgainButton=o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("button",{className:"startGameButton",onClick:function(){n.props.socket.emit("g-playAgain")}},"Play Again")),n.props.socket.on("disconnect",(function(e){n.setState({disconnected:!0})})),n.props.socket.on("g-gameOver",(function(e){a.setState({winner:"".concat(e," Wins!")}),a.setState({playAgain:a.playAgainButton})})),n.props.socket.on("g-updatePlayers",(function(e){a.setState({playAgain:null}),a.setState({winner:null}),e=e.filter((function(e){return!e.isDead}));for(var t=null,o=0;o<e.length;o++)if(console.log(e[o].name,n.props.name),e[o].name===n.props.name){t=o;break}null==t?n.setState({isDead:!0}):n.setState({isDead:!1}),console.log(t),a.setState({playerIndex:t,players:e})})),n.props.socket.on("g-updateCurrentPlayer",(function(e){console.log("currentPlayer: ",e),a.setState({currentPlayer:e})})),n.props.socket.on("g-addLog",(function(e){var t;t=e.split(" ").map((function(e,t){var n=null;return a.state.players.forEach((function(t){e===t.name&&(n=o.a.createElement("b",{style:{color:t.color}},t.name," "))})),n||o.a.createElement(o.a.Fragment,null,e+" ")})),a.state.logs=[].concat(Object(E.a)(a.state.logs),[t]),a.setState({logs:a.state.logs})})),n.props.socket.on("g-chooseAction",(function(){a.setState({isChooseAction:!0})})),n.props.socket.on("g-openExchange",(function(e){var t=[].concat(Object(E.a)(a.state.players[a.state.playerIndex].influences),Object(E.a)(e));a.setState({exchangeInfluence:t})})),n.props.socket.on("g-openChallenge",(function(e){n.state.isDead||(e.source!==a.props.name?a.setState({action:e}):a.setState({action:null}))})),n.props.socket.on("g-openBlockChallenge",(function(e){n.state.isDead||(e.counterAction.source!==a.props.name?a.setState({blockChallengeRes:e}):a.setState({blockChallengeRes:null}))})),n.props.socket.on("g-openBlock",(function(e){n.state.isDead||(e.source!==a.props.name?a.setState({blockingAction:e}):a.setState({blockingAction:null}))})),n.props.socket.on("g-chooseReveal",(function(e){console.log(e),a.setState({revealingRes:e})})),n.props.socket.on("g-chooseInfluence",(function(){a.setState({isChoosingInfluence:!0})})),n.props.socket.on("g-closeChallenge",(function(){a.setState({action:null})})),n.props.socket.on("g-closeBlock",(function(){a.setState({blockingAction:null})})),n.props.socket.on("g-closeBlockChallenge",(function(){a.setState({blockChallengeRes:null})})),n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=null,n=null,a=null,l=null,s=null,c=null,r=null,i=null,u=null,m=null,p=null,h=!0,d=null;return this.state.isChooseAction&&null!=this.state.playerIndex&&(h=!1,t=o.a.createElement(f,{doneAction:this.doneAction,deductCoins:this.deductCoins,name:this.props.name,socket:this.props.socket,money:this.state.players[this.state.playerIndex].money,players:this.state.players})),this.state.currentPlayer&&(n=o.a.createElement("p",null,"It is ",o.a.createElement("b",null,this.state.currentPlayer),"'s turn")),this.state.revealingRes&&(h=!1,a=o.a.createElement(y,{doneReveal:this.doneReveal,name:this.props.name,socket:this.props.socket,res:this.state.revealingRes,influences:this.state.players.filter((function(t){return t.name===e.props.name}))[0].influences})),this.state.isChoosingInfluence&&(h=!1,c=o.a.createElement(S,{doneChooseInfluence:this.doneChooseInfluence,name:this.props.name,socket:this.props.socket,influences:this.state.players.filter((function(t){return t.name===e.props.name}))[0].influences})),null==this.state.action&&null==this.state.blockChallengeRes&&null===this.state.blockingAction||(u=o.a.createElement("button",{onClick:function(){return e.pass()}},"Pass")),null!=this.state.action&&(h=!1,l=o.a.createElement(b,{closeOtherVotes:this.closeOtherVotes,doneChallengeVote:this.doneChallengeBlockingVote,name:this.props.name,action:this.state.action,socket:this.props.socket})),this.state.exchangeInfluence&&(h=!1,p=o.a.createElement(O,{doneExchangeInfluence:this.doneExchangeInfluence,name:this.props.name,influences:this.state.exchangeInfluence,socket:this.props.socket})),null!=this.state.blockChallengeRes&&(h=!1,s=o.a.createElement(k,{closeOtherVotes:this.closeOtherVotes,doneBlockChallengeVote:this.doneChallengeBlockingVote,name:this.props.name,prevAction:this.state.blockChallengeRes.prevAction,counterAction:this.state.blockChallengeRes.counterAction,socket:this.props.socket})),null!==this.state.blockingAction&&(h=!1,r=o.a.createElement(v,{closeOtherVotes:this.closeOtherVotes,doneBlockVote:this.doneChallengeBlockingVote,name:this.props.name,action:this.state.blockingAction,socket:this.props.socket})),null==this.state.playerIndex||this.state.isDead||(i=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Your Influences"),this.state.players[this.state.playerIndex].influences.map((function(t,n){return o.a.createElement("div",{key:n,className:"InfluenceUnitContainer"},o.a.createElement("span",{className:"circle",style:{backgroundColor:"".concat(e.influenceColorMap[t])}}),o.a.createElement("br",null),o.a.createElement("h3",null,t))}))),m=o.a.createElement("p",null,"Coins: ",this.state.players[this.state.playerIndex].money)),h&&!this.state.isDead&&(d=o.a.createElement("p",null,"Waiting for other players...")),this.state.disconnected?o.a.createElement("div",{className:"GameContainer"},o.a.createElement("div",{className:"GameHeader"},o.a.createElement("div",{className:"PlayerInfo"},o.a.createElement("p",null,"You are: ",this.props.name),m),o.a.createElement(R,null),o.a.createElement(w,null)),o.a.createElement("p",null,"You have been disconnected :c"),o.a.createElement("p",null,"Please recreate the game."),o.a.createElement("p",null,"Sorry for the inconvenience (\u30b7_ _)\u30b7")):o.a.createElement("div",{className:"GameContainer"},o.a.createElement("div",{className:"GameHeader"},o.a.createElement("div",{className:"PlayerInfo"},o.a.createElement("p",null,"You are: ",this.props.name),m),o.a.createElement("div",{className:"CurrentPlayer"},n),o.a.createElement(R,null),o.a.createElement(w,null),o.a.createElement(A,{logs:this.state.logs})),o.a.createElement("div",{className:"InfluenceSection"},i),o.a.createElement(C,{players:this.state.players}),o.a.createElement("div",{className:"DecisionsSection"},d,a,c,t,p,l,s,r,u,null),o.a.createElement("b",null,this.state.winner),this.state.playAgain)}}]),t}(a.Component),M=n(53),P="https://rocky-stream-49978.herokuapp.com",D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).onNameChange=function(e){n.setState({name:e})},n.joinParty=function(){var e=Object(m.a)(n),t=d()("".concat(P,"/").concat(n.state.roomCode));n.setState({socket:t}),console.log("socket created"),t.emit("setName",n.state.name),t.on("joinSuccess",(function(){console.log("join successful"),e.setState({isLoading:!1,isInRoom:!0})})),t.on("joinFailed",(function(t){console.log("join failed, cause: "+t),e.setState({isLoading:!1})})),t.on("leader",(function(){console.log("You are the leader")})),t.on("partyUpdate",(function(e){console.log(e),n.setState({players:e}),e.length>=2&&e.map((function(e){return e.isReady})).filter((function(e){return!0===e})).length===e.length?n.setState({canStart:!0}):n.setState({canStart:!1})})),t.on("disconnected",(function(){console.log("You've lost connection with the server")}))},n.createParty=function(){if(""===n.state.name)return console.log("Please enter a name"),n.setState({errorMsg:"Please enter a name"}),void n.setState({isError:!0});n.setState({isLoading:!0});var e=Object(m.a)(n);M.get("".concat(P,"/createNamespace")).then((function(t){console.log(t),e.setState({roomCode:t.data.namespace,errorMsg:""}),e.joinParty()})).catch((function(t){console.log("error in creating namespace",t),e.setState({isLoading:!1}),e.setState({errorMsg:"Error creating room, server is unreachable"}),e.setState({isError:!0})}))},n.startGame=function(){n.state.socket.emit("startGameSignal",n.state.players),n.state.socket.on("startGame",(function(){n.setState({isGameStarted:!0})}))},n.copyCode=function(){var e=document.createElement("textarea");document.body.appendChild(e),e.value=n.state.roomCode,e.select(),document.execCommand("copy"),document.body.removeChild(e),n.setState({copied:!0})},n.state={name:"",roomCode:"",copied:!1,isInRoom:!1,isLoading:!1,players:[],isError:!1,isGameStarted:!1,errorMsg:"",canStart:!1,socket:null},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;if(this.state.isGameStarted)return o.a.createElement(B,{name:this.state.name,socket:this.state.socket});var t=null,n=null,a=null,l=null,s=null;return this.state.isInRoom||(l=o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"createButton",onClick:this.createParty,disabled:this.state.isLoading},this.state.isLoading?"Creating...":"Create"),o.a.createElement("br",null))),this.state.isError&&(t=o.a.createElement("b",null,this.state.errorMsg)),""===this.state.roomCode||this.state.isLoading||(s=o.a.createElement("p",null,"You can drag to re-arrange the players in a specific turn order!"),n=o.a.createElement("div",null,o.a.createElement("p",null,"ROOM CODE: ",o.a.createElement("br",null)," ",o.a.createElement("br",null),o.a.createElement("b",{className:"RoomCode",onClick:this.copyCode},this.state.roomCode," ",o.a.createElement("span",{className:"iconify","data-icon":"typcn-clipboard","data-inline":"true"}))),this.state.copied?o.a.createElement("p",null,"Copied to clipboard"):null)),this.state.canStart&&(a=o.a.createElement("button",{className:"startGameButton",onClick:this.startGame},"Start Game")),o.a.createElement("div",{className:"createGameContainer"},o.a.createElement("p",null,"Please enter your name"),o.a.createElement("input",{type:"text",value:this.state.name,disabled:this.state.isLoading||this.state.isInRoom,onChange:function(t){t.target.value.length<=10?(e.setState({errorMsg:"",isError:!1}),e.onNameChange(t.target.value)):e.setState({errorMsg:"Name must be less than 11 characters",isError:!0})}}),o.a.createElement("br",null),l,t,o.a.createElement("br",null),n,s,o.a.createElement("div",{className:"readyUnitContainer"},o.a.createElement(g.a,{list:this.state.players,setList:function(t){return e.setState({players:t})}},this.state.players.map((function(e,t){var n=null,a="#E46258";return e.isReady?(n=o.a.createElement("b",null,"Ready!"),a="#73C373"):n=o.a.createElement("b",null,"Not Ready"),o.a.createElement("div",{className:"readyUnit",style:{backgroundColor:a},key:t},o.a.createElement("p",null,t+1,". ",e.name," ",n))})))),a)}}]),t}(a.Component),L=(n(137),n(35)),_=n(18),T=n(14),F=n(53),G=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).onNameChange=function(e){n.setState({name:e})},n.onCodeChange=function(e){n.setState({roomCode:e})},n.joinParty=function(){var e=Object(m.a)(n),t=d()("".concat("https://rocky-stream-49978.herokuapp.com","/").concat(n.state.roomCode));n.setState({socket:t}),console.log("socket created"),t.emit("setName",n.state.name),t.on("joinSuccess",(function(){console.log("join successful"),e.setState({isInRoom:!0})})),t.on("joinFailed",(function(n){console.log("join failed, cause: "+n),e.setState({errorMsg:n,isError:!0,isLoading:!1}),t.disconnect()})),t.on("startGame",(function(){n.setState({isGameStarted:!0})})),t.on("partyUpdate",(function(e){console.log(e),n.setState({players:e}),e.length>=3&&e.map((function(e){return e.isReady})).filter((function(e){return!0===e})).length===e.length?n.setState({canStart:!0}):n.setState({canStart:!1})})),t.on("disconnected",(function(){console.log("You've lost connection with the server")}))},n.attemptJoinParty=function(){if(""===n.state.name)return console.log("Please enter a name"),void n.setState({errorMsg:"Please enter a name",isError:!0});if(""===n.state.roomCode)return console.log("Please enter a room code"),void n.setState({errorMsg:"Please enter a room code",isError:!0});n.setState({isLoading:!0});var e=Object(m.a)(n);F.get("".concat("https://rocky-stream-49978.herokuapp.com","/exists/").concat(n.state.roomCode)).then((function(t){console.log(t),t.data.exists?(console.log("joining"),e.setState({errorMsg:""}),e.joinParty()):(console.log("Invalid Party Code"),e.setState({isLoading:!1,errorMsg:"Invalid Party Code",isError:!0}))})).catch((function(t){console.log("error in getting exists",t),e.setState({isLoading:!1,errorMsg:"Server error",isError:!0})}))},n.reportReady=function(){n.state.socket.emit("setReady",!0),n.state.socket.on("readyConfirm",(function(){n.setState({isReady:!0})}))},n.state={name:"",roomCode:"",players:[],isInRoom:!1,isReady:!1,isLoading:!1,isError:!1,isGameStarted:!1,errorMsg:"",socket:null},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;if(this.state.isGameStarted)return o.a.createElement(B,{name:this.state.name,socket:this.state.socket});var t=null,n=null,a=null;return this.state.isError&&(t=o.a.createElement("b",null,this.state.errorMsg)),n=this.state.isInRoom?o.a.createElement("button",{className:"joinButton",onClick:this.reportReady,disabled:this.state.isReady},"Ready"):o.a.createElement("button",{className:"joinButton",onClick:this.attemptJoinParty,disabled:this.state.isLoading},this.state.isLoading?"Joining...":"Join"),this.state.isReady&&(a=o.a.createElement("b",{style:{color:"#5FC15F"}},"You are ready!"),n=null),o.a.createElement("div",{className:"joinGameContainer"},o.a.createElement("p",null,"Your Name"),o.a.createElement("input",{type:"text",value:this.state.name,disabled:this.state.isLoading,onChange:function(t){t.target.value.length<=8?(e.setState({errorMsg:"",isError:!1}),e.onNameChange(t.target.value)):e.setState({errorMsg:"Name must be less than 9 characters",isError:!0})}}),o.a.createElement("p",null,"Room Code"),o.a.createElement("input",{type:"text",value:this.state.roomCode,disabled:this.state.isLoading,onChange:function(t){return e.onCodeChange(t.target.value)}}),o.a.createElement("br",null),n,o.a.createElement("br",null),a,o.a.createElement("br",null),t,o.a.createElement("div",{className:"readyUnitContainer"},this.state.players.map((function(e,t){var n=null,a="#E46258";return e.isReady?(n=o.a.createElement("b",null,"Ready!"),a="#73C373"):n=o.a.createElement("b",null,"Not Ready"),o.a.createElement("div",{className:"readyUnit",style:{backgroundColor:a},key:t},o.a.createElement("p",null,t+1,". ",e.name," ",n))}))))}}]),t}(a.Component),V=n(65),U=n.n(V),Y=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"homeContainer"},o.a.createElement("h1",null,"Welcome to Coup"),o.a.createElement("p",null,"A game of deduction and deception"),o.a.createElement("img",{src:U.a,alt:"chicken-leg"}),o.a.createElement("div",{className:"input-group-btn"},o.a.createElement(_.b,{className:"home",to:"/create"},"Create Game")),o.a.createElement("div",{className:"input-group-btn"},o.a.createElement(_.b,{className:"home",to:"/join"},"Join Game")),o.a.createElement("div",null,o.a.createElement("div",{className:"homeModalContainer"},o.a.createElement(R,{home:!0})))),o.a.createElement("p",{className:"footer"},"Made by ",o.a.createElement("a",{className:"website-link",href:"https://github.com/cheneth",target:"_blank",rel:"noopener noreferrer"},"Ethan Chen")),o.a.createElement("p",{className:"version-number"},"Beta v0.9"))}}]),t}(a.Component),W=Object({NODE_ENV:"production",PUBLIC_URL:"/coup-online"}).REACT_APP_GOOGLE_TRACKING_ID||"";L.a.initialize(W),L.a.pageview("/homepage");var J=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(_.a,null,o.a.createElement("div",null,o.a.createElement(T.c,null,o.a.createElement(T.a,{path:"/create"},o.a.createElement(D,null)),o.a.createElement(T.a,{path:"/join"},o.a.createElement(G,null)),o.a.createElement(T.a,{path:"/"},o.a.createElement(Y,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t,n){e.exports=n.p+"static/media/CheatSheet.ebc97bb6.svg"},65:function(e,t,n){e.exports=n.p+"static/media/Chicken.28e8baf1.svg"},69:function(e,t,n){e.exports=n(140)},74:function(e,t,n){},75:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"}},[[69,1,2]]]);
//# sourceMappingURL=main.e8e9eacc.chunk.js.map